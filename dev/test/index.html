<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://BNLIF.github.io/wire-cell-docs/dev/test/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Testing - Wire Cell Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Testing";
        var mkdocs_page_input_path = "dev/test.md";
        var mkdocs_page_url = "/wire-cell-docs/dev/test/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Wire Cell Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../install/install/">Install Wire Cell</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../install/external/">Install Externals</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../dev/">Building</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../iface/">Interfaces</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../data/">Persistency</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Testing</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#c-tests">C++ tests</a>
    </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Algorithms</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../alg/cell/">Making Cells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../alg/blob/">Blob Reconstruction</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Visualization</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../viz/bee/">Bee</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../viz/uploads/">User Uploads</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Meta</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../meta/meta/">About</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Wire Cell Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Developer</li>
      <li class="breadcrumb-item active">Testing</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/BNLIF/wire-cell-docs/edit/master/docs/dev/test.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="tests">Tests</h1>
<p>Tests go under the <code>test/</code> (or <code>tests/</code>) sub-directory of the package.  There are two types, C++ and Python.  In both cases, only files that begin with "<code>test_*</code>" will be considered tests.  Tests are automatically run as part of the build procedure (fixme: just C++ ones are automatic right now) and will be rerun when they or code they depend on changes.   When tests are run by the build the <code>stdout/stderr</code> is typically captured.  You can run them manually to observe any print statements.  Tests are not installed but left in the "<code>build/</code>" (or sometimes "<code>tmp/</code>") output directory.</p>
<p>Here are a few general guidelines for writing tests:</p>
<ul>
<li>write many tests</li>
<li>write tests as fine grained as convenient</li>
<li>the best tests are written before or while the code they test is being written</li>
<li>test code does need not be "pretty", it will never be called from anywhere else</li>
<li>tests should run quickly</li>
<li>do use contrived data or mocked code to provide a bit of test code it's needed input or code support</li>
</ul>
<h2 id="c-tests">C++ tests</h2>
<p>Writing a C++ test is to write a <code>main()</code> program which takes <strong>no arguments</strong>.  If a test fails, either let it crash the test program or call <code>exit(1)</code>.</p>
<p>You can explicitly run C++ test programs.  When they are run as part of the build, their full path is printed.  When run automatically, waf takes care of setting up their environment so that their libraries are found.  When run manually you will have to assure this.  The simplest way is to <code>waf install</code>" the package first.</p>
<pre><code class="language-bash">$ waf
...
execution summary
  tests that pass 3/4
    /home/bviren/projects/wire-cell/top/build/data/test_construct
    /home/bviren/projects/wire-cell/top/build/nav/test_geomdatasource
    /home/bviren/projects/wire-cell/top/build/sst/tgeomdatasource
  tests that fail 1/4
    /home/bviren/projects/wire-cell/top/build/data/test_fail
'build' finished successfully

$ waf install

$ /home/bviren/projects/wire-cell/top/build/sst/test_sst_geomdatasource
Wire: 0 plane=1 index=0
Wire: 0 plane=1 index=1
Wire: 0 plane=1 index=2
...
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../data/" class="btn btn-neutral float-left" title="Persistency"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../alg/cell/" class="btn btn-neutral float-right" title="Making Cells">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/BNLIF/wire-cell-docs/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../data/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../alg/cell/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
