<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://BNLIF.github.io/wire-cell-docs/install/external/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Install Externals - Wire Cell Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Install Externals";
        var mkdocs_page_input_path = "install/external.md";
        var mkdocs_page_url = "/wire-cell-docs/install/external/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Wire Cell Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../install/">Install Wire Cell</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Install Externals</a>
    <ul class="current">
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Developer</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../dev/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../dev/dev/">Building</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../dev/iface/">Interfaces</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../dev/data/">Persistency</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../dev/test/">Testing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Algorithms</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../alg/cell/">Making Cells</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../alg/blob/">Blob Reconstruction</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Visualization</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../viz/bee/">Bee</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../viz/uploads/">User Uploads</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Meta</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../meta/meta/">About</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Wire Cell Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Installation</li>
      <li class="breadcrumb-item active">Install Externals</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/BNLIF/wire-cell-docs/edit/master/docs/install/external.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="toc">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#manual-installation-of-externals">Manual installation of externals</a><ul>
<li><a href="#compiler">Compiler</a></li>
<li><a href="#root6">ROOT6</a></li>
</ul>
</li>
<li><a href="#automated-installation-with-spack">Automated installation with Spack</a></li>
<li><a href="#site-installations">Site installations</a><ul>
<li><a href="#racf-setup">RACF Setup</a></li>
<li><a href="#fnal-setup">FNAL Setup</a></li>
</ul>
</li>
<li><a href="#os-level-installation">OS level installation</a><ul>
<li><a href="#mac">Mac</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="overview">Overview</h1>
<p>The <code>wire-cell</code> software in <a href="https://github.com/BNLIF">BNL IF GitHub</a> depends on some software that may not come with your OS, in particular <a href="http://root.cern.ch">ROOT</a> v6 and a possibly a compiler that supports C++11.</p>
<p>There are a few ways ways to supply the required externals described below.</p>
<ol>
<li>
<p>manually build or otherwise provide them yourself.</p>
</li>
<li>
<p>automatically build and install them with <a href="https://github.com/LLNL/spack">Spack</a> with support provided by the Wire Cell Toolkit's <a href="https://github.com/WireCell/wire-cell-spack">wire-cell-spack</a> package.</p>
</li>
<li>
<p>use an existing site-installation.</p>
</li>
<li>
<p>OS-level installation.</p>
</li>
</ol>
<p>The following sections gives some guidance on each of these approaches.</p>
<h1 id="manual-installation-of-externals">Manual installation of externals</h1>
<p>You may provide Wire Cell externals as you wish.  This section gives
guidance on how to do this.</p>
<p>Some general things to assure:</p>
<ul>
<li>use the same compiler for all C++ packages.</li>
<li>use a compiler that supports C++11.</li>
<li>all C++ packages built against the C++11 standard, eg GCC's <code>-std=c++11</code> flag.</li>
</ul>
<p>The rest of this section gives some guidance on specific packages.</p>
<h2 id="compiler">Compiler</h2>
<p>You must use a compiler that supports C++11.
Clang may work but is untested (please report successes/failures).
GCC 4.9.2 is what the developers currently use.  </p>
<p>Newer GCCs are more strict, particularly w.r.t. headers will likely uncover bugs of omission.  Please report them to the developers.</p>
<h2 id="root6">ROOT6</h2>
<p>CMake should used with at least these flags:</p>
<pre><code class="language-shell">cmake -Dminuit2=ON -Dpython=ON -Dcxx11=ON -DFFTW_LIBRARY=/path/to/lib/libfftw3.so [...]
</code></pre>
<h1 id="automated-installation-with-spack">Automated installation with Spack</h1>
<p><a href="https://github.com/LLNL/spack">Spack</a> is a "meta build system" that
runs the individual build systems that come with packages.  It allows
one to manage an ever growing installation area which can accommodate
multiple versions of a package.  It also comes with support
for <a href="http://modules.sourceforge.net/">Environment Modules</a>
 to handle your users' setup of these packages or can make targeted release "views" of its package tree.</p>
<p>The Wire Cell Toolkit provides a package <a href="https://github.com/WireCell/wire-cell-spack">wire-cell-spack</a>
which collects instructions and a Spack "repo" that builds WCT and its third-party dependencies.  This leverages Spacks built-in "repo" to provide dependencies needed by WCT's direct dependencies.  Using it will tend to build packages that one may already have installed through the OS (eg, Python).  However, this duplication should not add much to the overall build time which is automatic nor lead to any problems.</p>
<p>An installer that wishes to use wire-cell-spack to provide the dependencies should begin by following its <a href="https://github.com/WireCell/wire-cell-spack/blob/master/README.org">README</a> file.</p>
<p>Although developed for the Wire Cell Toolkit, the resulting external dependencies will be suitable for the prototype.  However, some additional packages not strictly required may be built.</p>
<h1 id="site-installations">Site installations</h1>
<p>Some sites associated with Wire Cell development have already been
provisioned with the necessary externals and you may leverage them.</p>
<h2 id="racf-setup">RACF Setup</h2>
<p>At BNL's RACF, a simple, single-rooted installation of Wire Cell external packages is provided.</p>
<p>Bash users do:</p>
<pre><code class="language-bash">$ source /gpfs01/lbne/users/sw/wc/bin/thisroot.sh
</code></pre>
<p>Or, if you are still stuck using <code>tcsh</code> do:</p>
<pre><code class="language-csh">&gt; source /gpfs01/lbne/users/sw/wc/bin/thisroot.csh
</code></pre>
<h2 id="fnal-setup">FNAL Setup</h2>
<p>At Fermilab, externals are provided by UPS.</p>
<pre><code class="language-bash">$ source /grid/fermiapp/products/larsoft/setups
$ setup root v6_04_02 -q e7:prof
$ setup boost v1_57_0 -q e7:prof
</code></pre>
<h1 id="os-level-installation">OS level installation</h1>
<h2 id="mac">Mac</h2>
<p>Install homebrew and do</p>
<pre><code class="language-bash">$ brew install boost
$ brew install homebrew/science/root6
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../install/" class="btn btn-neutral float-left" title="Install Wire Cell"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../../dev/overview/" class="btn btn-neutral float-right" title="Overview">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/BNLIF/wire-cell-docs/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../../dev/overview/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
